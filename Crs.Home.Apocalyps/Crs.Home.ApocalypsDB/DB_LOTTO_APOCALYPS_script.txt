-- SQL Manager 2010 Lite for SQL Server 3.6.0.1
-- ---------------------------------------
-- Host      : LOCALHOST\SQLEXPRESS
-- Database  : DB_CRISVAIO
-- Version   : Microsoft SQL Server  9.00.2047.00

CREATE TABLE ESTRAZIONI (
  Estrazioni int NOT NULL,
  Numero int NULL,
  Data smalldatetime NULL,
  Ruota int NULL,
  N1 int NULL,
  N2 int NULL,
  N3 int NULL,
  N4 int NULL,
  N5 int NULL,
  IdEstrazione int NULL
)
GO

--
-- Definition for table Gemelli : 
--

CREATE TABLE Gemelli (
  Gemelli int NOT NULL,
  Ruota int NULL,
  Gemello int NULL,
  Data smalldatetime NULL
)
GO


--
-- Definition for table Lotto : 
--

CREATE TABLE Lotto (
  DATA smalldatetime NOT NULL,
  Numero int NULL,
  BA1 int NULL,
  BA2 int NULL,
  BA3 int NULL,
  BA4 int NULL,
  BA5 int NULL,
  CA1 int NULL,
  CA2 int NULL,
  CA3 int NULL,
  CA4 int NULL,
  CA5 int NULL,
  FI1 int NULL,
  FI2 int NULL,
  FI3 int NULL,
  FI4 int NULL,
  FI5 int NULL,
  GE1 int NULL,
  GE2 int NULL,
  GE3 int NULL,
  GE4 int NULL,
  GE5 int NULL,
  MI1 int NULL,
  MI2 int NULL,
  MI3 int NULL,
  MI4 int NULL,
  MI5 int NULL,
  NA1 int NULL,
  NA2 int NULL,
  NA3 int NULL,
  NA4 int NULL,
  NA5 int NULL,
  PA1 int NULL,
  PA2 int NULL,
  PA3 int NULL,
  PA4 int NULL,
  PA5 int NULL,
  RM1 int NULL,
  RM2 int NULL,
  RM3 int NULL,
  RM4 int NULL,
  RM5 int NULL,
  TO1 int NULL,
  TO2 int NULL,
  TO3 int NULL,
  TO4 int NULL,
  TO5 int NULL,
  VE1 int NULL,
  VE2 int NULL,
  VE3 int NULL,
  VE4 int NULL,
  VE5 int NULL,
  IdEstrazione int NULL
)
GO


--
-- Definition for table PREVISIONI : 
--

CREATE TABLE PREVISIONI (
  Data_Previsione smalldatetime NOT NULL,
  Ruota int NOT NULL,
  Previsione int NOT NULL,
  Num_Estrazione_Succ int NULL,
  Tipo_Frequenza int NULL,
  PrevAmbo int NULL,
  Previsioni int NOT NULL,
  PrevTerno int NULL,
  Segnale int NOT NULL,
  Attendibilita int NULL,
  Distanza_Segnale int NULL,
  Pendenza int NULL,
  Heigth_Prev_Prec int NULL,
  Filtrato varchar(1) COLLATE Latin1_General_CI_AS DEFAULT 'F' NULL
)
GO

EXEC sp_addextendedproperty 'MS_Description', N'Non Ã¨ usato dato che la pendenza viene inserita solo per il segnale (26-01-2011)', 'schema', 'Admin', 'table', 'PREVISIONI', 'column', 'Pendenza'
GO


--
-- Definition for table Regola1 : 
--

CREATE TABLE Regola1 (
  Data_Evento smalldatetime NOT NULL,
  Ruota int NOT NULL,
  NumeroA int NOT NULL,
  Tipo_Frequenza int NOT NULL,
  Num_Estrazione_Succ int NOT NULL,
  Regola1 int NULL,
  Data_Numero smalldatetime NULL,
  Accoppiata int NULL,
  NumeroB int NULL,
  Frequenza int NULL,
  Distanza_Ruota int NULL,
  Distanza_Accoppiata int NULL,
  Posizione int NULL
)
GO


--
-- Definition for table Ruote : 
--

CREATE TABLE Ruote (
  Ruote int NOT NULL,
  Descrizione varchar(50) COLLATE Latin1_General_CI_AS NULL,
  Accoppiata int NULL,
  Posizione_Accoppiata int NULL,
  Sigla varchar(2) COLLATE Latin1_General_CI_AS NULL
)
GO



CREATE UNIQUE NONCLUSTERED INDEX AK_IdEstr ON ESTRAZIONI
  (IdEstrazione, Ruota)
WITH (
  PAD_INDEX = OFF,
  IGNORE_DUP_KEY = OFF,
  DROP_EXISTING = OFF,
  STATISTICS_NORECOMPUTE = OFF,
  SORT_IN_TEMPDB = OFF,
  ONLINE = OFF,
  ALLOW_ROW_LOCKS = ON,
  ALLOW_PAGE_LOCKS = ON)
GO

CREATE UNIQUE NONCLUSTERED INDEX Data_Ruota ON ESTRAZIONI
  (Data, Ruota)
WITH (
  PAD_INDEX = OFF,
  IGNORE_DUP_KEY = OFF,
  DROP_EXISTING = OFF,
  STATISTICS_NORECOMPUTE = OFF,
  SORT_IN_TEMPDB = OFF,
  ONLINE = OFF,
  ALLOW_ROW_LOCKS = ON,
  ALLOW_PAGE_LOCKS = ON)
GO

ALTER TABLE ESTRAZIONI
ADD CONSTRAINT PK_ESTRAZIONI 
PRIMARY KEY CLUSTERED (Estrazioni)
WITH (
  PAD_INDEX = OFF,
  IGNORE_DUP_KEY = OFF,
  STATISTICS_NORECOMPUTE = OFF,
  ALLOW_ROW_LOCKS = ON,
  ALLOW_PAGE_LOCKS = ON)
GO

ALTER TABLE Gemelli
ADD CONSTRAINT PK_Gemelli 
PRIMARY KEY CLUSTERED (Gemelli)
WITH (
  PAD_INDEX = OFF,
  IGNORE_DUP_KEY = OFF,
  STATISTICS_NORECOMPUTE = OFF,
  ALLOW_ROW_LOCKS = ON,
  ALLOW_PAGE_LOCKS = ON)
GO


ALTER TABLE Lotto
ADD CONSTRAINT PK_Lotto 
PRIMARY KEY CLUSTERED (DATA)
WITH (
  PAD_INDEX = OFF,
  IGNORE_DUP_KEY = OFF,
  STATISTICS_NORECOMPUTE = OFF,
  ALLOW_ROW_LOCKS = ON,
  ALLOW_PAGE_LOCKS = ON)
 
GO


ALTER TABLE Ruote
ADD CONSTRAINT PK_Ruote 
PRIMARY KEY CLUSTERED (Ruote)
WITH (
  PAD_INDEX = OFF,
  IGNORE_DUP_KEY = OFF,
  STATISTICS_NORECOMPUTE = OFF,
  ALLOW_ROW_LOCKS = ON,
  ALLOW_PAGE_LOCKS = ON)
 
GO

ALTER TABLE Regola1
ADD CONSTRAINT PK_Regola1 
PRIMARY KEY CLUSTERED (Data_Evento, Ruota, NumeroA, Tipo_Frequenza, Num_Estrazione_Succ)
WITH (
  PAD_INDEX = OFF,
  IGNORE_DUP_KEY = OFF,
  STATISTICS_NORECOMPUTE = OFF,
  ALLOW_ROW_LOCKS = ON,
  ALLOW_PAGE_LOCKS = ON)
GO

ALTER TABLE REGOLA1_DECINE
ADD CONSTRAINT PK_REGOLA1_DECINE 
PRIMARY KEY CLUSTERED (Data_Evento, Ruota, NumeroA, Tipo_Frequenza, Num_Estrazione_Succ)
WITH (
  PAD_INDEX = OFF,
  IGNORE_DUP_KEY = OFF,
  STATISTICS_NORECOMPUTE = OFF,
  ALLOW_ROW_LOCKS = ON,
  ALLOW_PAGE_LOCKS = ON)
GO
--
-- Role Membership
--

EXEC sp_addrolemember 'db_owner', 'Admin'
GO

EXEC sp_addrolemember 'db_ddladmin', 'Admin'
GO

EXEC sp_addrolemember 'db_owner', 'LGUserDB'
GO

EXEC sp_addrolemember 'db_ddladmin', 'LGUserDB'
GO

EXEC sp_addrolemember 'db_ddladmin', 'SuperLogin'
GO

EXEC sp_addrolemember 'db_owner', 'SuperLogin'
GO

